import{d as R,r as m,J as Ve,j as e,K as Re,M as _e,N as U,O as G,Q as L,U as ze,V as de,X as Ue,Y as Te,f as q,$ as Le,B as S,a0 as T,a1 as oe,a2 as Be,a3 as J,a4 as Q,a5 as ue,a6 as Z,a7 as A,a8 as O,a9 as Fe,aa as He,ab as Ke,ac as $e,ad as Oe,ae as Ge,af as qe,ag as V,ah as Ye,ai as me,aj as he,ak as We,t as P,p as Xe,al as Je,am as xe,an as ee,ao as Qe,ap as Ze,I as et,L as pe,aq as tt,v as st,a as at,ar as nt,as as rt,R as it,at as ot,G as lt}from"./index-DhQhIbPw.js";import{u as ct,A as dt}from"./useAdEvents-x9B9BbxC.js";const ut=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],mt=R("facebook",ut);const ht=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],Y=R("file-image",ht);const xt=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M11 18h2",key:"12mj7e"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"M9 13v-.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 .5.5v.5",key:"qbrxap"}]],fe=R("file-type",xt);const pt=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],ft=R("instagram",pt);const gt=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],yt=R("maximize",gt);const vt=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],wt=R("pause",vt);const bt=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],jt=R("volume-2",bt);const Nt=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],St=R("volume-x",Nt);var ge=["PageUp","PageDown"],ye=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ve={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},B="Slider",[te,kt,Ct]=_e(B),[we]=Re(B,[Ct]),[Pt,W]=we(B),be=m.forwardRef((t,a)=>{const{name:r,min:n=0,max:o=100,step:c=1,orientation:i="horizontal",disabled:l=!1,minStepsBetweenThumbs:h=0,defaultValue:x=[n],value:f,onValueChange:u=()=>{},onValueCommit:s=()=>{},inverted:v=!1,form:j,...w}=t,g=m.useRef(new Set),p=m.useRef(0),b=i==="horizontal"?Et:It,[y=[],C]=Ve({prop:f,defaultProp:x,onChange:d=>{[...g.current][p.current]?.focus(),u(d)}}),I=m.useRef(y);function M(d){const N=Rt(y,d);E(d,N)}function F(d){E(d,p.current)}function H(){const d=I.current[p.current];y[p.current]!==d&&s(y)}function E(d,N,{commit:K}={commit:!1}){const D=Tt(c),X=Lt(Math.round((d-n)/c)*c+n,D),$=de(X,[n,o]);C((z=[])=>{const _=At(z,$,N);if(Ut(_,h*c)){p.current=_.indexOf($);const ie=String(_)!==String(z);return ie&&K&&s(_),ie?_:z}else return z})}return e.jsx(Pt,{scope:t.__scopeSlider,name:r,disabled:l,min:n,max:o,valueIndexToChangeRef:p,thumbs:g.current,values:y,orientation:i,form:j,children:e.jsx(te.Provider,{scope:t.__scopeSlider,children:e.jsx(te.Slot,{scope:t.__scopeSlider,children:e.jsx(b,{"aria-disabled":l,"data-disabled":l?"":void 0,...w,ref:a,onPointerDown:U(w.onPointerDown,()=>{l||(I.current=y)}),min:n,max:o,inverted:v,onSlideStart:l?void 0:M,onSlideMove:l?void 0:F,onSlideEnd:l?void 0:H,onHomeKeyDown:()=>!l&&E(n,0,{commit:!0}),onEndKeyDown:()=>!l&&E(o,y.length-1,{commit:!0}),onStepKeyDown:({event:d,direction:N})=>{if(!l){const X=ge.includes(d.key)||d.shiftKey&&ye.includes(d.key)?10:1,$=p.current,z=y[$],_=c*X*N;E(z+_,$,{commit:!0})}}})})})})});be.displayName=B;var[je,Ne]=we(B,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Et=m.forwardRef((t,a)=>{const{min:r,max:n,dir:o,inverted:c,onSlideStart:i,onSlideMove:l,onSlideEnd:h,onStepKeyDown:x,...f}=t,[u,s]=m.useState(null),v=L(a,b=>s(b)),j=m.useRef(void 0),w=ze(o),g=w==="ltr",p=g&&!c||!g&&c;function k(b){const y=j.current||u.getBoundingClientRect(),C=[0,y.width],M=re(C,p?[r,n]:[n,r]);return j.current=y,M(b-y.left)}return e.jsx(je,{scope:t.__scopeSlider,startEdge:p?"left":"right",endEdge:p?"right":"left",direction:p?1:-1,size:"width",children:e.jsx(Se,{dir:w,"data-orientation":"horizontal",...f,ref:v,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:b=>{const y=k(b.clientX);i?.(y)},onSlideMove:b=>{const y=k(b.clientX);l?.(y)},onSlideEnd:()=>{j.current=void 0,h?.()},onStepKeyDown:b=>{const C=ve[p?"from-left":"from-right"].includes(b.key);x?.({event:b,direction:C?-1:1})}})})}),It=m.forwardRef((t,a)=>{const{min:r,max:n,inverted:o,onSlideStart:c,onSlideMove:i,onSlideEnd:l,onStepKeyDown:h,...x}=t,f=m.useRef(null),u=L(a,f),s=m.useRef(void 0),v=!o;function j(w){const g=s.current||f.current.getBoundingClientRect(),p=[0,g.height],b=re(p,v?[n,r]:[r,n]);return s.current=g,b(w-g.top)}return e.jsx(je,{scope:t.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:e.jsx(Se,{"data-orientation":"vertical",...x,ref:u,style:{...x.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const g=j(w.clientY);c?.(g)},onSlideMove:w=>{const g=j(w.clientY);i?.(g)},onSlideEnd:()=>{s.current=void 0,l?.()},onStepKeyDown:w=>{const p=ve[v?"from-bottom":"from-top"].includes(w.key);h?.({event:w,direction:p?-1:1})}})})}),Se=m.forwardRef((t,a)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:o,onSlideEnd:c,onHomeKeyDown:i,onEndKeyDown:l,onStepKeyDown:h,...x}=t,f=W(B,r);return e.jsx(G.span,{...x,ref:a,onKeyDown:U(t.onKeyDown,u=>{u.key==="Home"?(i(u),u.preventDefault()):u.key==="End"?(l(u),u.preventDefault()):ge.concat(ye).includes(u.key)&&(h(u),u.preventDefault())}),onPointerDown:U(t.onPointerDown,u=>{const s=u.target;s.setPointerCapture(u.pointerId),u.preventDefault(),f.thumbs.has(s)?s.focus():n(u)}),onPointerMove:U(t.onPointerMove,u=>{u.target.hasPointerCapture(u.pointerId)&&o(u)}),onPointerUp:U(t.onPointerUp,u=>{const s=u.target;s.hasPointerCapture(u.pointerId)&&(s.releasePointerCapture(u.pointerId),c(u))})})}),ke="SliderTrack",Ce=m.forwardRef((t,a)=>{const{__scopeSlider:r,...n}=t,o=W(ke,r);return e.jsx(G.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...n,ref:a})});Ce.displayName=ke;var se="SliderRange",Pe=m.forwardRef((t,a)=>{const{__scopeSlider:r,...n}=t,o=W(se,r),c=Ne(se,r),i=m.useRef(null),l=L(a,i),h=o.values.length,x=o.values.map(s=>Me(s,o.min,o.max)),f=h>1?Math.min(...x):0,u=100-Math.max(...x);return e.jsx(G.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...n,ref:l,style:{...t.style,[c.startEdge]:f+"%",[c.endEdge]:u+"%"}})});Pe.displayName=se;var ae="SliderThumb",Ee=m.forwardRef((t,a)=>{const r=kt(t.__scopeSlider),[n,o]=m.useState(null),c=L(a,l=>o(l)),i=m.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return e.jsx(Mt,{...t,ref:c,index:i})}),Mt=m.forwardRef((t,a)=>{const{__scopeSlider:r,index:n,name:o,...c}=t,i=W(ae,r),l=Ne(ae,r),[h,x]=m.useState(null),f=L(a,k=>x(k)),u=h?i.form||!!h.closest("form"):!0,s=Ue(h),v=i.values[n],j=v===void 0?0:Me(v,i.min,i.max),w=Vt(n,i.values.length),g=s?.[l.size],p=g?_t(g,j,l.direction):0;return m.useEffect(()=>{if(h)return i.thumbs.add(h),()=>{i.thumbs.delete(h)}},[h,i.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${j}% + ${p}px)`},children:[e.jsx(te.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(G.span,{role:"slider","aria-label":t["aria-label"]||w,"aria-valuemin":i.min,"aria-valuenow":v,"aria-valuemax":i.max,"aria-orientation":i.orientation,"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,tabIndex:i.disabled?void 0:0,...c,ref:f,style:v===void 0?{display:"none"}:t.style,onFocus:U(t.onFocus,()=>{i.valueIndexToChangeRef.current=n})})}),u&&e.jsx(Ie,{name:o??(i.name?i.name+(i.values.length>1?"[]":""):void 0),form:i.form,value:v},n)]})});Ee.displayName=ae;var Dt="RadioBubbleInput",Ie=m.forwardRef(({__scopeSlider:t,value:a,...r},n)=>{const o=m.useRef(null),c=L(o,n),i=Te(a);return m.useEffect(()=>{const l=o.current;if(!l)return;const h=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(h,"value").set;if(i!==a&&f){const u=new Event("input",{bubbles:!0});f.call(l,a),l.dispatchEvent(u)}},[i,a]),e.jsx(G.input,{style:{display:"none"},...r,ref:c,defaultValue:a})});Ie.displayName=Dt;function At(t=[],a,r){const n=[...t];return n[r]=a,n.sort((o,c)=>o-c)}function Me(t,a,r){const c=100/(r-a)*(t-a);return de(c,[0,100])}function Vt(t,a){return a>2?`Value ${t+1} of ${a}`:a===2?["Minimum","Maximum"][t]:void 0}function Rt(t,a){if(t.length===1)return 0;const r=t.map(o=>Math.abs(o-a)),n=Math.min(...r);return r.indexOf(n)}function _t(t,a,r){const n=t/2,c=re([0,50],[0,n]);return(n-c(a)*r)*r}function zt(t){return t.slice(0,-1).map((a,r)=>t[r+1]-a)}function Ut(t,a){if(a>0){const r=zt(t);return Math.min(...r)>=a}return!0}function re(t,a){return r=>{if(t[0]===t[1]||a[0]===a[1])return a[0];const n=(a[1]-a[0])/(t[1]-t[0]);return a[0]+n*(r-t[0])}}function Tt(t){return(String(t).split(".")[1]||"").length}function Lt(t,a){const r=Math.pow(10,a);return Math.round(t*r)/r}var De=be,Bt=Ce,Ft=Pe,Ht=Ee;const Ae=m.forwardRef(({className:t,...a},r)=>e.jsxs(De,{ref:r,className:q("relative flex w-full touch-none select-none items-center",t),...a,children:[e.jsx(Bt,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(Ft,{className:"absolute h-full bg-primary"})}),e.jsx(Ht,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));Ae.displayName=De.displayName;const Kt=({src:t,className:a,autoPlay:r=!1,loop:n=!0,muted:o=!1,poster:c})=>{const i=m.useRef(null),[l,h]=m.useState(r),[x,f]=m.useState(o),[u,s]=m.useState(0),[v,j]=m.useState(0),[w,g]=m.useState(!1),[p,k]=m.useState(null),[b,y]=m.useState(!1);m.useEffect(()=>{console.log("VideoPlayer - Source changed:",t),y(!1),k(null)},[t]);const C=()=>{h(!l)},I=()=>{f(!x)},M=d=>{d.played!==void 0&&s(d.played*100)},F=d=>{if(!i.current||!b){console.warn("VideoPlayer - Player not ready for seeking");return}try{const N=d[0]/100;typeof i.current.seekTo=="function"?(i.current.seekTo(N,"fraction"),s(d[0])):console.error("VideoPlayer - seekTo is not a function on playerRef.current",i.current)}catch(N){console.error("VideoPlayer - Seek failed:",N)}},H=d=>{console.error("VideoPlayer - Error loading video:",d,t),k("Error loading media. Format may not be supported or file is missing.")},E=()=>{const d=i.current?.getInternalPlayer?.()||i.current?.getInternalPlayer;if(d&&d.requestFullscreen)d.requestFullscreen();else{const N=document.querySelector(".react-player-wrapper");N?.requestFullscreen&&N.requestFullscreen()}};return e.jsxs("div",{className:q("relative rounded-xl overflow-hidden group bg-black aspect-square cursor-default react-player-wrapper",a),onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:[e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Le,{ref:i,url:t,playing:l,muted:x,loop:n,width:"100%",height:"100%",onProgress:M,onDuration:d=>{console.log("VideoPlayer - Duration:",d),j(d)},onReady:()=>{console.log("VideoPlayer - Player ready. Ref instance:",i.current),y(!0)},onError:H,playsinline:!0,style:{objectFit:"contain",background:"black"},config:{file:{attributes:{poster:c,crossOrigin:"anonymous",style:{objectFit:"contain",width:"100%",height:"100%"},onDurationChange:d=>{d.target.duration&&j(d.target.duration)}}},youtube:{playerVars:{modestbranding:1,rel:0}}}})}),e.jsx("div",{className:"absolute inset-0 z-0 cursor-pointer",onClick:C}),p&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/90 backdrop-blur-sm z-20",children:e.jsxs("div",{className:"text-center p-6 max-w-md",children:[e.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:"Media Loading Error"}),e.jsx("p",{className:"text-white/70 text-sm mb-4",children:p}),e.jsxs("p",{className:"text-white/50 text-xs mb-4 font-mono break-all",children:["Source: ",t]}),e.jsx(S,{onClick:()=>{k(null),h(!1),setTimeout(()=>h(r),100)},className:"bg-white/10 hover:bg-white/20 text-white",children:"Retry"})]})}),e.jsx(T,{initial:{opacity:0,y:10},animate:{opacity:w||!l?1:0,y:w||!l?0:10},transition:{duration:.2},className:"absolute inset-x-0 bottom-0 p-4 bg-gradient-to-t from-black/80 via-black/40 to-transparent pt-12 z-10",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"px-1",children:e.jsx(Ae,{value:[u],max:100,step:.1,onValueChange:F,className:"cursor-pointer"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{variant:"ghost",size:"icon",onClick:d=>{d.stopPropagation(),C()},className:"h-9 w-9 text-white hover:bg-white/20 rounded-full",children:l?e.jsx(wt,{className:"h-5 w-5 fill-current"}):e.jsx(oe,{className:"h-5 w-5 fill-current ml-0.5"})}),e.jsx(S,{variant:"ghost",size:"icon",onClick:d=>{d.stopPropagation(),I()},className:"h-9 w-9 text-white hover:bg-white/20 rounded-full",children:x?e.jsx(St,{className:"h-5 w-5"}):e.jsx(jt,{className:"h-5 w-5"})}),e.jsxs("span",{className:"text-[10px] font-bold text-white/80 tabular-nums",children:[le(u/100*v)," /"," ",le(v)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{variant:"ghost",size:"icon",onClick:d=>{d.stopPropagation(),b&&i.current?.seekTo(0),l||h(!0)},className:"h-9 w-9 text-white hover:bg-white/20 rounded-full",children:e.jsx(Be,{className:"h-4 w-4"})}),e.jsx(S,{variant:"ghost",size:"icon",onClick:d=>{d.stopPropagation(),E()},className:"h-9 w-9 text-white hover:bg-white/20 rounded-full",children:e.jsx(yt,{className:"h-4 w-4"})})]})]})]})}),!l&&!p&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-10",children:e.jsx(T,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"h-16 w-16 bg-primary/90 text-white rounded-full flex items-center justify-center shadow-2xl backdrop-blur-sm pointer-events-auto cursor-pointer",onClick:d=>{d.stopPropagation(),C()},children:e.jsx(oe,{className:"h-8 w-8 fill-current ml-1"})})})]})};function le(t){if(isNaN(t)||t===1/0)return"0:00";const a=Math.floor(t/60),r=Math.floor(t%60);return`${a}:${r.toString().padStart(2,"0")}`}const $t=({onDownload:t,onShare:a,onCopyLink:r})=>e.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[e.jsxs(J,{children:[e.jsx(Q,{asChild:!0,children:e.jsx(S,{variant:"secondary",className:"rounded-full h-10 w-10 p-0 shadow-lg bg-white/80 backdrop-blur-sm hover:bg-white text-gray-900",children:e.jsx(ue,{className:"h-4 w-4"})})}),e.jsxs(Z,{className:"rounded-xl border-gray-100 p-2 shadow-xl",children:[e.jsxs(A,{onClick:()=>t("png"),className:"rounded-lg font-medium",children:[e.jsx(Y,{className:"mr-2 h-4 w-4"})," PNG Image"]}),e.jsxs(A,{onClick:()=>t("jpg"),className:"rounded-lg font-medium",children:[e.jsx(Y,{className:"mr-2 h-4 w-4"})," JPG Image"]}),e.jsxs(A,{onClick:()=>t("pdf"),className:"rounded-lg font-medium",children:[e.jsx(fe,{className:"mr-2 h-4 w-4"})," PDF Report"]})]})]}),e.jsxs(J,{children:[e.jsx(Q,{asChild:!0,children:e.jsx(S,{variant:"secondary",className:"rounded-full h-10 w-10 p-0 shadow-lg bg-white/80 backdrop-blur-sm hover:bg-white text-gray-900",children:e.jsx(O,{className:"h-4 w-4"})})}),e.jsxs(Z,{className:"rounded-xl border-gray-100 p-2 shadow-xl",children:[e.jsxs(A,{onClick:a,className:"rounded-lg font-medium",children:[e.jsx(O,{className:"mr-2 h-4 w-4"})," Share via..."]}),e.jsxs(A,{onClick:r,className:"rounded-lg font-medium",children:[e.jsx(O,{className:"mr-2 h-4 w-4"})," Copy Link"]})]})]})]}),Ot=({variants:t,title:a,mediaType:r,onDownload:n,onShare:o,onCopyLink:c})=>{const i=r==="VIDEO",l=t.length>1,h=(x,f)=>{const u=x.includes("youtube.com")||x.includes("youtu.be"),s=x.toLowerCase().endsWith(".mp4")||x.toLowerCase().endsWith(".webm")||x.toLowerCase().endsWith(".mov")||x.toLowerCase().endsWith(".m4v")||x.includes("blob:")||x.includes("video")&&!x.includes("thumbnail");return i||u||s?e.jsx(Kt,{src:x,className:"w-full h-full"}):e.jsx("img",{src:x,alt:`${a} - Variant ${f+1}`,className:"w-full h-full object-contain bg-black/5 aspect-square"})};return e.jsx(Fe,{className:"border-none shadow-2xl rounded-lg overflow-hidden bg-white",children:e.jsx(He,{className:"p-0",children:e.jsxs("div",{className:"aspect-square relative group",children:[l?e.jsxs(Ke,{className:"w-full h-full",children:[e.jsx($e,{className:"ml-0",children:t.map((x,f)=>e.jsx(Oe,{className:"pl-0",children:h(x,f)},f))}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-4 pointer-events-none",children:[e.jsx(Ge,{className:"relative left-0 pointer-events-auto shadow-lg border-none bg-white/80 backdrop-blur-sm hover:bg-white"}),e.jsx(qe,{className:"relative right-0 pointer-events-auto shadow-lg border-none bg-white/80 backdrop-blur-sm hover:bg-white"})]})]}):h(t[0],0),e.jsx($t,{onDownload:n,onShare:o,onCopyLink:c})]})})})},Gt=me("relative overflow-hidden cursor-pointer inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{size:{default:"min-w-28 h-10 px-4 py-2",sm:"min-w-24 h-9 rounded-md gap-1.5 px-3",md:"min-w-28 h-10 px-4 py-2",lg:"min-w-32 h-11 px-8"},icon:{suffix:"pl-4",prefix:"pr-4"}},defaultVariants:{size:"default"}}),ne={sm:16,md:20,lg:28,default:16};function qt({children:t,className:a,size:r,icon:n,onIconClick:o,...c}){const[i,l]=m.useState(!1);return e.jsx(V.button,{className:q("bg-primary text-primary-foreground hover:bg-primary/90",Gt({size:r,className:a,icon:n})),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),...c,children:e.jsx(Ye,{initial:!1,mode:"wait",children:i?e.jsx(V.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},exit:{opacity:0,y:24},transition:{duration:.3},className:" absolute left-0 right-0 top-0 bottom-0 flex items-center justify-center gap-2",children:e.jsx(Wt,{size:r,onIconClick:o})},"icons"):e.jsxs(V.div,{initial:{opacity:1,y:0},animate:{opacity:1,y:0},exit:{opacity:0,y:-24},transition:{duration:.3},className:" absolute left-0 right-0 top-0 bottom-0 flex items-center justify-center gap-2",children:[n==="prefix"&&e.jsx(O,{className:"size-4",size:ne[r]}),t,n==="suffix"&&e.jsx(O,{className:"size-4",size:ne[r]})]},"content")})})}const Yt=me("flex items-center justify-center gap-3",{variants:{size:{default:"text-[16px]",sm:"text-[16px]",md:"text-[20px]",lg:"text-[28px]"}},defaultVariants:{size:"default"}});function Wt({size:t="default",className:a,onIconClick:r}){const n=ne[t],o=m.useCallback((c,i)=>{r?.(c,i)},[r]);return e.jsxs(V.div,{className:q(Yt({size:t}),"group",a),children:[e.jsx(V.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{delay:0,duration:.5,type:"spring",bounce:.4},whileHover:{y:-8,transition:{duration:.2,ease:"easeOut"}},className:"group-hover:opacity-100 cursor-pointer py-3 rounded-lg box-border",onClick:c=>o("instagram",c),children:e.jsx(ft,{size:n})}),e.jsx(V.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{delay:.1,duration:.5,type:"spring",bounce:.4},whileHover:{y:-8,transition:{duration:.2,ease:"easeOut"}},className:"group-hover:opacity-100 cursor-pointer py-3 rounded-lg box-border",onClick:c=>o("facebook",c),children:e.jsx(mt,{size:n})}),e.jsx(V.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{delay:.2,duration:.5,type:"spring",bounce:.4},whileHover:{y:-8,transition:{duration:.2,ease:"easeOut"}},className:"group-hover:opacity-100 cursor-pointer py-3 rounded-lg box-border",onClick:c=>o("x",c),children:e.jsx(he,{size:n})}),e.jsx(V.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{delay:.3,duration:.5,type:"spring",bounce:.4},whileHover:{y:-8,transition:{duration:.2,ease:"easeOut"}},className:"group-hover:opacity-100 cursor-pointer py-3 rounded-lg box-border",onClick:c=>o("link",c),children:e.jsx(We,{size:n})})]})}const Xt=({mediaType:t,shareUrl:a,title:r,onDownload:n})=>{const o=t==="VIDEO",c=i=>{const l=encodeURIComponent(a),h=encodeURIComponent(r);switch(i){case"facebook":window.open(`https://www.facebook.com/sharer/sharer.php?u=${l}`,"_blank");break;case"x":window.open(`https://twitter.com/intent/tweet?url=${l}&text=${h}`,"_blank");break;case"instagram":case"link":navigator.clipboard.writeText(a).then(()=>{P.success(i==="instagram"?"Link copied! Share it on your Instagram Story or Bio.":"Link copied to clipboard!")});break}};return e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs(J,{children:[e.jsx(Q,{asChild:!0,children:e.jsxs(S,{className:"w-full h-12 rounded-xl font-bold text-sm transition-all shadow-lg shadow-primary/10 bg-primary text-white hover:bg-primary/90",children:[e.jsx(ue,{className:"mr-3 h-4 w-4"}),"Download ",o?"Video":"Image"]})}),e.jsxs(Z,{className:"w-56 rounded-lg border-gray-100 p-2 shadow-xl",children:[e.jsx(A,{onClick:()=>n("png"),className:"rounded-md font-medium p-3 cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 rounded-md bg-blue-50 flex items-center justify-center mr-3 text-blue-500",children:e.jsx(Y,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-gray-900",children:"PNG Image"}),e.jsx("div",{className:"text-[10px] text-gray-400",children:"High Quality"})]})]})}),e.jsx(A,{onClick:()=>n("jpg"),className:"rounded-md font-medium p-3 cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 rounded-md bg-orange-50 flex items-center justify-center mr-3 text-orange-500",children:e.jsx(Y,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-gray-900",children:"JPG Image"}),e.jsx("div",{className:"text-[10px] text-gray-400",children:"Compressed"})]})]})}),e.jsx(A,{onClick:()=>n("pdf"),className:"rounded-md font-medium p-3 cursor-pointer",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 rounded-md bg-red-50 flex items-center justify-center mr-3 text-red-500",children:e.jsx(fe,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-gray-900",children:"PDF Report"}),e.jsx("div",{className:"text-[10px] text-gray-400",children:"Analytics & Preview"})]})]})})]})]}),e.jsxs("div",{className:"pt-6 space-y-4",children:[e.jsx("div",{className:"h-px bg-gray-200"}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("p",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-widest",children:"Share with your audience"}),e.jsx(qt,{size:"lg",onIconClick:c,className:"w-full h-14 rounded-2xl shadow-xl shadow-primary/20",children:"Share Ad"})]})]})]})},ce=({onBack:t,status:a,mediaType:r,onSave:n,onEdit:o,isSaving:c=!1})=>{const i=r==="VIDEO";return e.jsx("div",{className:"bg-white border-b border-gray-100 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(S,{variant:"ghost",onClick:t,className:"text-gray-600 hover:text-gray-900",children:[e.jsx(Xe,{className:"mr-2 h-4 w-4"}),"Back to History"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:q("px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider",a==="COMPLETED"&&"bg-green-50 text-green-600",a==="FAILED"&&"bg-red-50 text-red-600",a==="CANCELLED"&&"bg-gray-100 text-gray-500",(a==="PENDING"||a==="PROCESSING")&&"bg-yellow-50 text-yellow-600"),children:a}),e.jsx("span",{className:"px-3 py-1 bg-blue-50 rounded-full text-xs font-bold text-blue-600 uppercase tracking-wider",children:i?"Video Ad":"Image Ad"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[o&&e.jsxs(S,{variant:"outline",onClick:o,className:"flex items-center gap-2 border-gray-200",children:[e.jsx(Je,{className:"h-4 w-4"}),"Edit Ad"]}),n&&e.jsxs(S,{onClick:n,disabled:c,className:"flex items-center gap-2 bg-primary hover:bg-primary/90",children:[e.jsx(xe,{className:"h-4 w-4"}),c?"Saving...":"Save Ad"]})]})]})})})},Jt=({mediaType:t})=>{const a=t==="VIDEO";return e.jsxs(T,{variants:ee,className:"text-center space-y-4 mb-10",children:[e.jsx("div",{className:"bg-blue-500 text-white h-20 w-20 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:e.jsx(Qe,{className:"h-10 w-10"})}),e.jsxs("h2",{className:"text-4xl sm:text-5xl font-black text-gray-900 tracking-tight",children:["Your ",a?"Video":"Image"," Ad is"," ",e.jsx("span",{className:"text-primary",children:"Ready"})]}),e.jsxs("p",{className:"text-base font-medium text-gray-600 max-w-md mx-auto",children:["Your ",a?"video":"image"," ad has been created successfully.",a?" Share your engaging video content across platforms.":" Download and share your stunning visuals."]})]})},Qt=({title:t,isEditing:a,editedTitle:r,isUpdating:n,onStartEdit:o,onTitleChange:c,onSave:i,onCancel:l})=>e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-gray-100 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Campaign Title"}),!a&&e.jsx(S,{variant:"ghost",size:"icon",onClick:o,className:"h-8 w-8 text-gray-400 hover:text-gray-900",children:e.jsx(Ze,{className:"h-4 w-4"})})]}),a?e.jsxs("div",{className:"space-y-3",children:[e.jsx(et,{value:r,onChange:h=>c(h.target.value),className:"text-xl font-bold",placeholder:"Enter campaign title",autoFocus:!0,onKeyDown:h=>{h.key==="Enter"&&i(),h.key==="Escape"&&l()}}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(S,{onClick:i,disabled:n,size:"sm",className:"flex-1",children:n?e.jsx(pe,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"mr-2 h-4 w-4"}),"Save"]})}),e.jsxs(S,{onClick:l,variant:"outline",size:"sm",className:"flex-1",children:[e.jsx(he,{className:"mr-2 h-4 w-4"}),"Cancel"]})]})]}):e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:t||"Untitled Campaign"})]}),ts=()=>{const{adId:t}=tt({strict:!1}),a=st(),[r,n]=m.useState(!1),[o,c]=m.useState(""),{generatedAd:i}=at();ct(t||null);const l=t?.startsWith("mock-demo-"),{data:h,isLoading:x,error:f}=nt(l?void 0:t);console.log("Ad Response: ",i);const u=i?.data?.id===t?i.data:null,s=u||(l?i?.data:h?.data),{mutate:v,isPending:j}=rt();if(it.useEffect(()=>{s&&c(s.title||"Untitled Campaign")},[s]),x&&!l&&!u)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(pe,{className:"h-8 w-8 animate-spin text-primary"})});const w=async()=>{if(s?.id)try{await lt.cancelAd(s.id),P.info("Generation cancelled"),a({to:"/ads/history"})}catch{P.error("Failed to cancel generation")}};if(s&&(s.status==="PENDING"||s.status==="PROCESSING"))return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col",children:[e.jsx(ce,{onBack:()=>a({to:"/ads/history"}),status:s.status,mediaType:s.mediaType||"IMAGE",onSave:()=>{},onEdit:()=>a({to:`/ads/edit/${s.id}`}),isSaving:!1}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-4xl",children:e.jsx(dt,{status:s.status,onCancel:w})})})]});if(f&&!l&&!s||!x&&!s&&!l)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Ad Not Found"}),e.jsx("p",{className:"text-gray-600",children:f?"Failed to load the ad. Please try again.":"The ad preview data is missing."}),e.jsx(S,{onClick:()=>a({to:"/ads/history"}),children:"Back to History"})]})});const g=window.location.origin+"/ads/preview/"+s.id,p=s.mediaType||"IMAGE",k=p==="VIDEO",y=(()=>{if(k){if(s.videoUrls&&s.videoUrls.length>0)return s.videoUrls;if(s.videoUrl)return[s.videoUrl];if(s.url)return[s.url];if(s.data?.videoUrls&&s.data.videoUrls.length>0)return s.data.videoUrls;if(s.data?.videoUrl)return[s.data.videoUrl]}if(s.generatedImages&&s.generatedImages.length>0)return s.generatedImages.map(d=>d.url);if(!k){if(s.imageUrls&&s.imageUrls.length>0)return s.imageUrls;if(s.imageUrl)return[s.imageUrl];if(s.data?.imageUrls&&s.data.imageUrls.length>0)return s.data.imageUrls;if(s.data?.imageUrl)return[s.data.imageUrl]}return["https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?w=800&auto=format&fit=crop&q=60"]})();k&&console.log("Video Ad Debug Info:",{adId:s.id,mediaType:s.mediaType,videoUrl:s.videoUrl,videoUrls:s.videoUrls,dataVideoUrl:s.data?.videoUrl,dataVideoUrls:s.data?.videoUrls,generatedImages:s.generatedImages,finalVariants:y});const C=async()=>{if(navigator.share)try{await navigator.share({title:s.title,text:s.description,url:g})}catch{}else I()},I=()=>{navigator.clipboard.writeText(g),P.success("Link copied to clipboard!")},M=(d,N)=>{if(P.success(`Downloading as ${d.toUpperCase()}...`),d==="pdf"){setTimeout(()=>{P.success("PDF Report downloaded")},1500);return}const K=N||s.videoUrl||s.imageUrl||s.previewUrl||y[0],D=document.createElement("a");D.href=K,D.download=`ad-campaign-${s.id}.${d}`,document.body.appendChild(D),D.click(),document.body.removeChild(D)},F=()=>{if(!o.trim()){P.error("Title cannot be empty");return}v({id:s.id,title:o,status:s.status,variableValues:s.variableValues},{onSuccess:()=>{n(!1),P.success("Ad updated successfully!")}})},H=()=>{v({id:s.id,title:s.title||o,status:s.status,variableValues:s.variableValues},{onSuccess:()=>{P.success("Ad saved successfully!")},onError:()=>{P.error("Failed to save ad. Please try again.")}})},E=()=>{c(s.title||"Untitled Campaign"),n(!1)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsx(ce,{onBack:()=>a({to:"/ads/history"}),status:s.status||"PENDING",mediaType:p,onSave:H,onEdit:()=>a({to:`/ads/edit/${s.id}`}),isSaving:j}),e.jsxs(T,{variants:ot,initial:"hidden",animate:"visible",className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10",children:[e.jsx(Jt,{mediaType:p}),s.status==="FAILED"&&e.jsxs("div",{className:"mb-10 bg-red-50 border border-red-200 rounded-xl p-6 flex flex-col md:flex-row items-center gap-6 animate-in fade-in slide-in-from-top-2",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-red-100 flex items-center justify-center shrink-0",children:e.jsx("span",{className:"text-2xl",children:"⚠️"})}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx("h4",{className:"text-lg font-black text-gray-900 uppercase tracking-tight",children:"Generation Failed"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.metadata?.error||"An unexpected error occurred during ad generation."})]}),e.jsx(S,{onClick:()=>a({to:`/ads/edit/${s.id}`}),className:"px-6 h-10 bg-red-600 hover:bg-red-700 text-white border-none shadow-lg shadow-red-200",children:"Retry Settings"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-10",children:[e.jsx(T,{variants:ee,className:"lg:col-span-3",children:e.jsx(Ot,{variants:y,title:s.title||"",mediaType:p,onDownload:M,onShare:C,onCopyLink:I})}),e.jsxs(T,{variants:ee,className:"lg:col-span-2 space-y-6",children:[e.jsx("div",{className:"space-y-6",children:e.jsx(Qt,{title:s.title||"",isEditing:r,editedTitle:o,isUpdating:j,onStartEdit:()=>n(!0),onTitleChange:c,onSave:F,onCancel:E})}),e.jsx(Xt,{mediaType:p,shareUrl:g,title:s.title,onDownload:M})]})]})]})]})};export{ts as default};
